<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.baidu.lease.web.admin.mapper.FacilityInfoMapper">

    <select id="selectListByApartmentId" resultType="com.baidu.lease.model.entity.FacilityInfo">
        select t3.type, t3.name, t3.icon, t3.id
        from (select t1.name, t1.type, t1.icon, t2.apartment_id, t1.is_deleted, t1.id
              from facility_info t1
                       left join apartment_facility t2
                                 on t1.id = t2.facility_id
                                     and t1.is_deleted = 0 and t2.is_deleted = 0) t3
                 left join apartment_info t4
                           on t3.apartment_id = t4.id and t3.is_deleted = 0
        where t3.apartment_id = #{id}
          and t3.type = 1

    </select>

</mapper>
